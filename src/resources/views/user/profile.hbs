<div class="container bootstrap snippet mt-5">
    <div class="row">
        <div class="col-md-3">
            <div class="list-group" style="height: 100%; background-color: #fff;">
                <a href="/user/profile" class="list-group-item list-group-item-action active">Thông tin cá nhân</a>
                <a href="/user/dashboard" class="list-group-item list-group-item-action">Thống kê hoạt động</a>
                <button class="list-group-item list-group-item-action btn-ur-deal" data="false"
                    data-url="/product/buyed">Các sản phẩm đã mua
                    <span class="text-danger">({{amount.buyed}})</span></button>
            </div>
        </div>
        <div class="col-md-9">
            <div class="row bg-light p-3">
                <div class="col-sm-10">
                    <h1 class="fullname" style="font-family: cursive">{{user.fullname}}</h1>
                </div>
                <div class="col-sm-2"><a href="/users" class="pull-right"><img title="profile image"
                            class="img-circle img-responsive" src="/upload/avatar/{{user.avata}}"
                            style="height: 100px;"></a></div>
            </div>
            <div class="row row bg-light p-3 mt-3">
                <div class="col-sm-4">
                    <!--left col-->
                    <div class="text-center">
                        <img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png"
                            class="avatar img-circle img-thumbnail mb-3" alt="avatar">
                        <h6>Chọn ảnh đại diện khác</h6>
                        <form action="/user/profile/updateava" method="POST" encType="multipart/form-data">
                            <input type="file" class="text-center center-block file-upload" name="avata">
                            <button class="btn btn-primary mt-3" type="submit">Lưu</button>
                        </form>
                    </div>
                    </hr><br>

                    <ul class="list-group">
                        <li class="list-group-item text-muted"><i class="fa fa-dashboard fa-1x mr-2"></i>Thống kê hoạt
                            động
                        </li>
                        <li class="list-group-item d-flex justify-content-between"><span class="pull-left"><strong>SP đã
                                    bán </strong></span>
                            {{amount.sold}}</li>
                        <li class="list-group-item d-flex justify-content-between"><span class="pull-left"><strong>SP
                                    đang bán </strong></span> {{amount.onsale}}
                        </li>
                        <li class="list-group-item d-flex justify-content-between"><span class="pull-left"><strong>SP đã
                                    mua </strong></span> {{amount.buyed}}
                        </li>
                        <li class="list-group-item d-flex justify-content-between"><span class="pull-left"><strong>SP đã
                                    đấu giá </strong></span>
                            {{amount.bid}}</li>
                    </ul>


                </div>
                <!--/col-3-->
                <div class="col-sm-8">
                    <h4 class="success text-success mb-3" style="display: none;">Cập nhật thành công</h4>
                    <h4 class="error text-danger mb-3" style="display: none;">Cập nhật thất bại</h4>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item"><a data-toggle="tab" class="nav-link active" role="tab"
                                href="#profile">Thông tin chính</a></li>
                        <li class="nav-item"><a data-toggle="tab" class="nav-link" role="tab"
                                href="#passwordtab">Đổi mật khẩu</a></li>
                        <li class="nav-item"><a data-toggle="tab" class="nav-link" role="tab"
                                href="#description">Mô tả</a></li>
                    </ul>

                    <div class="tab-content mt-3">
                        <div class="tab-pane fade active show" role="tabpanel" id="profile">
                            <form class="form" id="form-info">
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <label for="full_name">
                                            <h5>Tên: </h5>
                                        </label>
                                        <input type="text" value="{{user.fullname}}" class="form-control"
                                            name="fullname" id="fullname" placeholder="Nhập vào tên của bạn."
                                            title="Nhập vào tên của bạn.">
                                    </div>
                                </div>
                                <div class="form-group">

                                    <div class="col-xs-6">
                                        <label for="gender">
                                            <h5>Giới tính:</h5>
                                        </label>
                                        <select class="form-control" name="gender" id="gender">
                                            {{#equal user.gender "male"}}
                                            <option value="male" selected>Nam</option>
                                            <option value="female">Nữ</option>
                                            {{/equal}}
                                            {{#notequal user.gender "male"}}
                                            <option value="male">Nam</option>
                                            <option value="female" selected>Nữ</option>
                                            {{/notequal}}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">

                                    <div class="col-xs-6">
                                        <label for="gender">
                                            <h5>Khu vực:</h5>
                                        </label>
                                        <select class="form-control" name="area" id="area">
                                            {{#each area}}
                                            <option value="{{this}}" {{{isSelected this ../user.area}}}>{{this}}
                                            </option>
                                            {{/each}}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <label for="phone">
                                            <h5>Số điện thoại:</h5>
                                        </label>
                                        <input type="text" class="form-control" name="phone" id="phone"
                                            placeholder="Nhập vào số điện thoại của bạn."
                                            title="Nhập vào số điện thoại của bạn." value="{{user.phone}}">
                                    </div>
                                </div>
                                <div class="form-group">

                                    <div class="col-xs-12">
                                        <label for="email">
                                            <h5>Email:</h5>
                                        </label>
                                        <input type="email" class="form-control" name="email" id="email"
                                            value="{{user.email}}" placeholder="Nhập vào email của bạn."
                                            title="Nhập vào email của bạn.">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <label for="address">
                                            <h5>Địa chỉ:</h5>
                                        </label>
                                        <input type="text" class="form-control" name="address" id="address"
                                            value="{{user.address}}" placeholder="Nhập vào địa chỉ của bạn"
                                            title="Nhập vào địa chỉ của bạn">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <br>
                                        <button class="btn btn-lg btn-success" type="submit"><i
                                                class="glyphicon glyphicon-ok-sign"></i> Lưu</button>
                                    </div>
                                </div>
                            </form>

                            <hr>

                        </div>
                        <!--/tab-pane-->
                        <div class="tab-pane fade" role="tabpanel" id="passwordtab">
                            <form class="form" id="form-password">
                                <div class="form-group">

                                    <div class="col-xs-12">
                                        <label for="password">
                                            <h5>Mật khẩu mới</h5>
                                        </label>
                                        <input type="password" class="form-control" name="password" id="password"
                                            placeholder="Nhập vào mật khẩu mới." title="Nhập vào mật khẩu mới.">
                                    </div>
                                </div>
                                <div class="form-group">

                                    <div class="col-xs-12">
                                        <label for="password2">
                                            <h5>Xác nhận lại mật khẩu</h5>
                                        </label>
                                        <input type="password" class="form-control" name="password2" id="password2"
                                            placeholder="Nhập lại mật khẩu mới." title="Nhập lại mật khẩu mới.">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <br>
                                        <button class="btn btn-lg btn-success pull-right" type="submit"><i
                                                class="glyphicon glyphicon-ok-sign"></i> Lưu</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!--/tab-pane-->
                        <div class="tab-pane fade" role="tabpanel" id="description">
                            <form class="form" id="form-description">
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <label for="description">
                                            <h5>Mô tả ngắn:</h5>
                                        </label>
                                        <textarea class="form-control description" rows="10"
                                            name="description">{{user.description}}</textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-xs-12">
                                        <br>
                                        <button class="btn btn-lg btn-success pull-right" type="submit"><i
                                                class="glyphicon glyphicon-ok-sign"></i> Lưu</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!--/tab-pane-->
                </div>
                <!--/tab-content-->
            </div>
            <!--/col-9-->
        </div>
        <!--/row-->
    </div>
</div>

<form id="formUrProduct" action="" method="POST" hidden>
    <input name="page" class="page" value="1"/>
    <input name="completed" class="completed"/>
    <input name="data-url" class="data-url"/>
</form>
<form id="formUrDeal" action="" method="POST" hidden>
    <input name="page" class="page" value="1"/>
    <input name="type" class="type"/>
    <input name="data-url" class="data-url"/>
</form>

<script>
    $(document).on('click', '.btn-ur-product', (e) => {
        let el = e.target;
        let data = $(el).attr('data');
        let data_url = $(el).attr('data-url');
        $('.completed').val(data);
        $('.data-url').val(data_url);
        $('#formUrProduct').attr('action', data_url);
        $('#formUrProduct')[0].submit();
    });

    $(document).on('click', '.btn-ur-deal', (e) => {
        let el = e.target;
        let data = $(el).attr('data');
        let data_url = $(el).attr('data-url');
        $('.type').val(data);
        $('.data-url').val(data_url);
        $('#formUrDeal').attr('action', data_url);
        $('#formUrDeal')[0].submit();
    });
</script>
<script src="/js/user-profile.js"></script>